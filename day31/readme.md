## 进程间通信

队列： 管道 + 锁，先进先出。

堆：先进后出。



## 队列的方法

不适合多进程的情况。

full()   如果有一个长度5的队列，有5个进程向里面写，但是在判断完的一瞬间有一个进程又消费了数据，就会出现判断不准确的情况。

get_nowait()

empty()

```text
	并发:看上去像同时运行的
	并行:真正意义上的同时执行
	ps:单核的计算机绝对不可能实现并行 但是可以实现并发
	
并发编程
	操作系统发展史
		基于单核研究
		多道技术
			1.空间上的复用
				多个程序公用一套计算机硬件
			2.时间上的复用
				切换+保存状态
				例子:洗衣 烧水 做饭
				
				切换
					1.程序遇到IO操作系统会立刻剥夺走CPU的执行权限
						IO:input,sleep,accept,recv...阻塞   日常生活中使用软件通常都是IO密集型
					
					2.当你的程序长时间占用CPU的时候也会被操作系统剥夺走cpu的执行权限
					
						
	进程理论
		进程调度
			时间片轮转法+多级反馈队列
		
		进程三状态图
			ps:程序不会立刻进入运行态 都会现在就绪态等待cpu的执行
			
			
		同步异步:指的是任务的提交方式
			同步:提交任务之后原地等待任务的返回结果 期间不做任何事
			异步:提交任务之后立刻执行下一行代码 不等待任务的返回结果   >>> 结果的获取使用异步回调机制
		阻塞非阻塞:指的是程序的运行状态
			阻塞:阻塞态
			非阻塞:就绪态或者是运行态
		
	创建进程的两种方式
		使用使用Process实例化
		继承Process类重写run方法
		ps:windows在开启进程的时候必须在__main__代码块内,因为windows是以模块导入的方式从上执行代码
		
	什么是进程:
		正在运行的程序
			一个进程对应到内存中就是一块独立的内存空间
	
	join方法
		主进程等待某个指定的子进程运行结束,不影响其他子进程的运行
	
	进程对象及其他方法
		current_process().pid
		os.getpid
		os.getppid
		terminate()
		is_alive()
	
	守护进程
		daemon
		这一句化必须在start之前使用
	
	进程间数据是隔离的
	
	互斥锁
		多个程序操作用一份数据的时候会出现数据错乱的现象
		如何避免:
			将操作数据的部分加锁处理
			会将并发变成串行牺牲了效率但是保证了数据的安全
			
		抢锁
			acquire()
		释放锁
			release()
		例子:抢厕所
		
	抢票实例
```

## 什么时候用for什么时候用多进程


在 Python 中对一个长度为 10000 的列表进行处理时，选择 for 循环还是多线程的方法取决于以下几个因素：

如果你对列表中的数据处理是 计算密集型（如复杂数学运算、加密解密等），使用 Python 的多线程并不一定能提高性能。
对于长度为 10000 的列表，如果每个任务的处理时间很短，创建线程或进程的开销可能会超过实际的性能提升。这种情况下，直接用 for 循环会更高效。
如果每个任务的处理时间较长（如每个操作需要几百毫秒以上），多线程或多进程可以更有效。

如果任务简单（如纯粹的数学操作），直接用 for 循环 是最合理的。
如果任务涉及 I/O 操作，使用多线程 会提升效率。
    比如ping探测存活主机。
如果任务是 CPU 密集型，使用多进程 才能有效提升性能。
    就把每个元素进行简单的数学运算。


## 线程

```text


什么是线程
    进程线程其实都是虚拟单位,都是用来帮助我们形象的描述某种事物

    进程:资源单位
    线程:执行单位
        将内存比如成工厂
        那么进程就相当于是工厂里面的车间
        而你的线程就相当于是车间里面的流水线
    ps:每个进程都自带一个线程,线程才是真正的执行单位,进程只是在线程运行过程中
    提供代码运行所需要的资源


为什么要有线程
    开进程
        1.申请内存空间  耗资源
        2."拷贝代码"    耗资源

    开线程
        一个进程内可以起多个线程,并且线程与线程之间数据是共享的
    ps:开启线程的开销要远远小于开启进程的开销

```
如何使用线程